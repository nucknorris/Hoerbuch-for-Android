%!TEX root = ../docu.tex
\section{Grundlagen}
\subsection{Mobile Anwendungen}
Software und Services können auf verschiedene Wege für mobile Endgeräte entwickelt und angeboten werden. Aktuelle Plattformen wie Android\footnote{http://developer.android.com/index.html} von Google oder iOS\footnote{https://developer.apple.com/devcenter/ios/index.action} von Apple ermöglichen auf verschiedene Wege das ausführen von Software durch den Benutzer.

Hierbei haben sich zwei Arten von Applikationen durchgesetzt. Beide bieten gewissen Vor- und Nachteile die im folgenden näher betrachtet werden sollen.

\subsubsection{Webapplikationen}

Webapplikationen - so verrät der Name - sind Applikationen die über einen Webbrowser auf dem Gerät abgerufen werden können. Diese Applikationen werden von Betreibern von Website zur Verfügung gestellt und laufen unabhängig der normalen Webpräsenz.

Durch verschiedene Kennungen kann der Webserver erkennen ob Besucher der Webseiten von einem mobilen Endgerät aus auf die zur Verfügung gestellten Inhalte zugreifen will und kann eine Webapplikation anbieten.

Diese Form der Anwendungen ist in Unternehmen sehr beliebt. So können verschiedene IT-Systeme und Geschäftsprozesse ortsunabhängig von mobilen Geräten heraus gesteuert und angezeigt werden.

Diese Art der Applikationen hat einen großen Vorteil für die Administration von mobilen Endgeräten im Unternehmen. So ist es möglich die Installation von nativen Applikationen gänzlich zu verbieten um sensible Daten auf den Gerät vor dritten zu schützen. Dennoch können Anwendungen über den Webbrowser des Gerätes aufgerufen und verwendet werden.

VPN\footnote{Virtuell Private LAN}-Lösungen unterstützen diese Verfahrensweise in dem sie den Benutzer im Unternehmens internen Internet\footnote{Intranet} festhalten und nur das Öffnen der Webapplikation im Unternehmensnetzwerk erlaubt.

Der Sinn solcher Applikation ist neben der Plattformunabhängigkeit eine Ersparnis an Zeit und kosten für bestimmte Unternehmensprozesse.

Ein Beispiel sind Geräte für Kassensysteme in Bars und Restaurants oder Geräte im Einsatz in Lagerhallen. Im Außendienst lösen Tablets und Smartphones immer mehr das Notebooks als Hauptwerkzeug der im Außendienst tätigen Mitarbeiter ab. Dies wird durch sinkende Notebookverkäufe auf dem Businesssektor verdeutlicht.

Einige Unternehmen in Deutschland so z.b die RWE Gruppe führen Aktionen durch indem die Mitarbeiter ihre eigenen Endgeräte zur Arbeit verwende können. Für diesen Zweck können sie sich in das Unternehmensnetzwerk verbinden und Webapplikationen nutzen. Diese Maßnahmen sind oft mit Schulungen und Einweisungen verbunden und sollen die Produktivität erhöhen ohne hohe Kosten für Geräte und Mobilfunkverträge zu erzeugen.

\subsubsection{Native Applikationen}
\label{natand}

Native Applikationen können in einer Art Onlineshop der jeweiligen Zielplattform erworben oder kostenlos heruntergeladen werden. Je nach Plattform variiert hier die Verfahrensweise und Möglichkeit der Bezahlung.

Einmal erworben Applikationen sind dabei immer für den Nutzer verfügbar. Diese Onlineshops bieten auch die Möglichkeit bei Updates der Software ein Upgrade der auf dem Smartphone oder Tablet installierten Version auf die aktuelle Version.

Die installierte Anwendung ist nichts anderes wie eine für das jeweilige Betriebssystem geschriebene Software. Diese Anwendung ist speziell für die Plattform angepasst und entwickelt. Dadurch ist der Funktionsumfang der Anwendung nur durch das Betriebssystem begrenzt. Solche Anwendungen können von einen Werkzeugen für das alltägliche leben bis hin zu komplexen Anwendungen oder sogar Spielen reichen.

Durch die Entwicklung für die verschiedenen Plattformen ist es nicht möglich z.B. eine Anwendung für die iOS Plattform für die Android Plattform zu verwenden.

Es gibt dennoch Anbieter solcher Plattformen die die Möglichkeit einräumen plattformübergreifend Applikationen nutzen zu können. So ist es dem Betriebssystem Ubuntu Phone\footnote{http://www.ubuntu.com/devices/phone} möglich Android Applikationen auszuführen. Diese Möglichkeit wird über Emulatoren realisiert. 

Angebotene Software kann über verschiedene Quellen auf das Telefon gelangen. Die Erste ist der vom Hersteller der Plattform bereitgestellte Onlineshop, welcher schon angesprochen wurde. Des Weiteren ist es möglich eigene Software zu entwickeln und über ein Speichermedien oder Cloudspeicher auf das Telefon zu übertragen und zu installieren.

Einige Hersteller erlauben dieses verfahren nicht und verbieten diese Möglichkeit der Installation von nativen Applikationen.

Möchte ein Entwickler für alle mobilen Betriebssystem Plattformen eine Applikation anbieten, ist der Entwicklungsaufwand höher da für jede Plattform eine native Anwendung geschrieben werden muss.

Alle angebotenen Anwendungen müssen verschieben Kriterien der jeweiligen Plattformbetreibern geprüft werden. Diese technische Prüfung entfällt bei Installationswegen, welche vom Shop abweichen. So können manuell über einen Speichermedium installiere Software nicht durch den Plattformbetreiber geprüft werden.

Jede ausgeführte Anwendung hat theoretisch auf alle Systemkomponenten des Smartphones zugriff. Dazu gehören unter anderem Kamera, Speicherkarten, Audioeinrichtungen wie Mikrofon und Lautsprecher.

Um die jeweiligen Applikationen untereinander zu schützen und das System als solches selbst zu schützen wird dieses Problem mit sogenannten Sandbox begegnet. Die Funktionsweise der Sandboxen wir im Kapitel \ref{sandbox} beschreiben.

\subsubsection{Verbraucher und Datenschutz}
Die Installation von zusätzlicher Software hat nicht nur Voreile sondern ermöglicht es auch personenbezogene Daten zu erfassen und sammeln. Die Unwissenheit der Benutzer über die abfliegenden Datenströme ist unter Verbraucher- und Datenschützern viel diskutiert.

Die technische Unwissenheit der Benutzer erleichtert es Unternehmen Daten von Personen zu sammeln und auszuwerten. Beispielsweise lassen sich Bewegungsprofile erstellen und diese werden anschließend für gezielte Werbeaktionen genutzt z.B. für Geschäften die auf dem Heimweg liegen.

Der Nutzer wird über die Erfassung und Nutzung seiner Daten nicht informiert. Bei der Installation von Software wird der Benutzer lediglich drauf hingewiesen auf welche Systemkomponenten die Applikation zugreifen möchte. Billigt der Benutzer ein können die Anwendungen auf die Komponenten jederzeit zugreifen ohne das der Benutzer intervenieren kann. Erst durch die Deinstallation der Anwendung kann die Applikation keine Daten mehr erfassen.

Dennoch hat das sammeln von Daten einen gewissen Mehrwert für den Benutzer. So können automatisch Staumeldungen angezeigt werden, Fahrzeiten zu Terminen berechnet oder die Geburtstage von Freunden oder Verwandte geraden nicht in Vergessenheit.

Das unbemerkte Absickern von Daten ist dennoch ein Problem und wird weiterhin ein Kritikpunkt bleiben.

\subsection{Die Architektur von Android}

\subsubsection{Das Android SDK}

Um die Entwicklung von Applikationen für die Android-Plattform zu vereinfachen und unterstützen stellt \emph{Google} ein \textbf{S}oftware \textbf{D}evelopment \textbf{K}it, kurz \textbf{SDK} zur Verfügung \cite{android_sdk}. Darin sind unter anderem ein Plugin für die Entwicklungsumgebung \verb+Eclipse+ sowie die aktuelle Android Platform mit den verwendbaren Bibliotheken enthalten. Außerdem werden die \textbf{ADT}, die \textbf{A}ndroid \textbf{D}eveloper \textbf{T}ools, eine Sammlung von Werkzeugen die für die Ausführung von Applikationen auf einem Android-Gerät nötig sind mitgeliefert. Mit dessen Hilfe ist es möglich den geschriebenen Quellcode direkt zu übersetzen und auf dem Gerät oder in einem mitgelieferten Emulator zu starten.

\subsubsection{Dalvik Virtual Machine}
Herzstück von Android ist die \verb+Dalvic Virtual Machine+ (DVM). Diese führt mit der \verb+Java Virtual Machine+ kompilierten Code nach entsprechender Konvertierung als Bytecode aus. Hervorzuheben ist dabei, dass die DVM so kompakt ist, dass jeder Prozess eine eigene Instanz der DVM ausführen kann. Dies stellt die in Abschnitt \ref{sandbox} beschriebene Sandbox dar.

\subsubsection{Sandbox}
\label{sandbox}
Mit dem Begriff Sandbox\footnote{engl. Sandkasten} bezeichnet man eine in sich abgeschlossene Umgebung die prinzipiell keine Auswirkungen auf ihre Umwelt hat. Sandboxes werden häufig als Sicherheitsfeature für Anwendungen oder zum Test von Software verwendet.

Die Anwendung wird dabei vom System auf dem sie ausgeführt wird abgeschirmt und durch externe Mechanismen kontrolliert. Diese Mechanismen stellen sicher, dass die Anwendung in der Sandbox bleibt und regeln die zusätzlich die Informationszufuhr oder den Zugriff auf Systemkomponenten.

Die laufende Anwendung kann diese Mechanismen nicht umgehen oder steuern und ist in ihrem Handlungsspielraum eingeschränkt. Sollte sie jedoch versuchen aus ihrem künstlichen Gefängnis herauszubrechen wird dies durch Sicherungsmaßen erkannt und der Versuch unterbrochen oder die Ausführung der Anwendung gänzlich gestoppt.

\begin{figure}[ht!]
\begin{center}
\includegraphics[scale=0.4]{images/sandbox}
\caption{Sandbox-Umgebung mit 2 Applikationen}
\label{sandbox_pic}
\end{center}
\end{figure}

Durch die Verwendung von Sandboxes können nicht nur Softwaretests durchgeführt werden ohne das eigentliche System zu gefährden, sondern auch Anwendungen in Laufzeitumgebungen ausgeführt werden, um die Sicherheit von Daten oder dem eigentlichen System zu gewährleisten. 

Auch Webbrowser verwenden Sandboxes für Webseiten um das System z.b. gegen die Infizierung mit Viren zu schützen. Diese Sandboxes haben auch auf vielen mobilen Endgeräten ihren Platz eingenommen. So werden native Anwendungen auf Mobiltelefonen in Sandboxes ausgeführt um die Anwendungen voneinander abzuschotten und um das System und ihre Komponenten zu schützen. Eine solche Umgebung ist in Abbildung \ref{sandbox_pic} abstrahiert. Die Abbildung zeigt eine schematische Darstellung einer Sandbox mit Applikationen.

\subsubsection{Das Android-Manifest und Permissions}
Die Kommunikation der Sandbox mit der Systemumgebung wird bei Android über \verb+Permissions+ geregelt. Damit werden der Sandbox Benutzungsrechte für genau definierte Bereiche zugeteilt. 
Ein Zentraler Punkt in der Sicherheitsarchitektur von Android besteht darin, dass standardmäßig keine Applikation Berechtigungen besitzt irgendetwas zu tun, was andere Apps, das System oder den Nutzer nachteilig beeinflusst. Darunter fallen beispielsweise der Zugriff auf private Daten des Nutzers oder auf das Netzwerk.

Damit eine Applikation auf das Internet zugreifen kann muss der Entwickler dies aktiv erlauben und der Nutzer sieht bekommt diese Information auch vor dem Installieren angezeigt. Abbildung \ref{permissions} zeigt, wie dem Nutzer bei der Installation die Permissions angezeigt werden, die die Applikation benötigt. 

\begin{figure}[ht!]
\begin{center}
\includegraphics[scale=0.3]{images/permissions}
\caption{Permissions der Applikation Apollo bei der Installation}
\label{permissions}
\end{center}
\end{figure}

Diese Strategie wird konsequent fortgesetzt. So sind automatische Updates nur möglich, wenn sich keine Berechtigungen geändert haben. Falls die App im neusten Update auf die Kontakte zugreifen will muss der Nutzer dies neu bestätigen.

\paragraph{Das Android Manifest}
Jede App hat eine Datei mit dem Namen \verb+AndroidManifest.xml+ in der wichtige Informationen für das System gespeichert werden. Folgende Übersicht zeigt ein paar der wichtigsten Aufgaben des Manifest:

\begin{itemize}
	\item Es beschreibt die Komponenten der Applikation,
	\item Es beinhaltet die verschiedenen Permissions der Applikation,
	\item Es definiert die verwendete Android-Version,
	\item Falls zusätzliche Bibliotheken verwendet werden erscheinen diese auch hier.
\end{itemize}

Somit müssen alle benötigten Permissions in das Manifest eingetragen werden. Bei der Installation kann Android dann diese lesen und dem Nutzer darstellen.

Mit der Transparenz die dem Nutzer durch diese Strategie gegeben wird kann zu jedem Zeitpunkt genau entschieden werden, ob eine Applikation sicher ist oder nicht. Entwickler sind durch den \emph{Developer Guide} \cite{android_api} angehalten die Permissions ihrer Anwendungen so gering wie möglich zu halten. Dadurch werden unnötige Zugriffe und eventuelle Sicherheitslücken vermieden.

\subsection{Komponenten - Die Bestandteile einer Android-Anwendung}
\label{components}
Damit eine Anwendung im Ganzen funktioniert arbeiten mehrere Komponenten zusammen. Alle Arten von Komponenten haben ihre speziellen Aufgaben. In der Folgenden Übersicht werden die beiden Komponentenarten vorgestellt, die in der hier Applikation verwendet wurden. (aus \cite{android_components}).

\begin{description}[style=nextline]
	\item[Activities] Ein dargestellter Bildschirm mit seinen Elementen wird als \emph{Activity} bezeichnet. Bei der Applikation dieser Arbeit sind beispielsweise die Startseite die angezeigt wird wenn man die das Programm startet oder auch die Player-Ansicht \emph{Activities}.
	\item[Services] Als \emph{Service} wird eine Komponente bezeichnet die im Hintergrund läuft und da Aufgaben verrichtet. Der Player der Applikation ist ein Service. Dies bietet die Möglichkeit Musikdateien im Hintergrund zu laden und abzuspielen. So kann der Nutzer beispielsweise im Internet surfen währendessen das Hörbuch weiter läuft.
\end{description}

Zusätzlich zu den Komponenten werden \emph{Ressourcen} zur Verfügung gestellt. Diese beinhalten beispielsweise Bilder und Icons die für die Darstellung verwendet werden.

\subsubsection{Lebenszyklus von Anwendungen}

Jede Komponente hat verschiedene Zustände in denen sie sich befinden kann. Diese Zustände spielen eine große Rolle bei der Entwicklung. 

\begin{figure}[ht!]
\begin{center}
\includegraphics[scale=.6]{images/activity_lifecycle}
\caption{Der Lebenszyklus einer Activity}
\label{lifecycle}
\end{center}
\end{figure}

Grundsätzlich entscheidet man bei Activities in drei Status:

\begin{description}[style=nextline]
	\item[Resumed] In diesem Zustand befindet sich die Activity im Vordergrund und ist fokusiert. Wird auch \emph{running} genannt.
	\item[Paused] Wenn eine andere Activity im Vordergrund ist und die vorherige noch sichtbar ist, ist diese pausiert. Man findet diesen Zustand beispielsweise bei kleinen Auswahlfenstern wobei man nach der Auswahl direkt wieder zur Ausgangs-Activity geleitet wird.
	\item[Stopped] Die Activity ist im Hintergrund. Der Prozess selbst lebt zwar noch, ist aber für den Anwender nicht mehr sichtbar und wird nach einer gewissen Zeit vom System komplett beendet. 
\end{description}

In Abbildung \ref{lifecycle} werden die Status mit den dazugehörigen Übergangsfunktionen angezeigt.

Wichtig bei der Entwicklung ist es, dass man zu jeder Zeit weiß welche Aktion von welchem Zustand aus ausgeführt werden kann. Dabei muss man alle Status beachten und Aktionen dafür festlegen da es sonst zu ungewolltem Verhalten und Abstürzen kommen kann. Hat man beispielsweise im Status \emph{Activity running} eine Datenbankverbindung geöffnet und vergessen in der \verb+onDestroy()+-Methode diese Verbindung wieder zu schließen wird die Applikation abstürzen und es kann zu Datenverlust kommen. Dies liegt daran, dass Android die Verbindung nicht selbst beendet. Allerdings stellt es Methoden wie \verb+onDestroy()+ bereit, die aufgerufen wird, wenn die Activity beendet wird, um auf Ereignisse zu reagieren.

Um die Speicherverwaltung muss man sich selbst nicht kümmern. Android verwaltet Speicher selbst. Grundlage dafür bieten die Status der Applikationen. Ist beispielsweise der Browser seit mehreren Minuten im Hintergrund und es wurden zwischenzeitlich mehrer Anwendungen gestartet die Speicher benötigen, wird der Browser beendet um den nötigen RAM zur Verfügung zu stellen. Da aktuelle Geräte über bis zu \SI{3}{GB} Speicher verfügen, kann ein schneller Wechsel zwischen Anwendungen gewährleistet werden, da diese nicht beendet werden müssen.

Allerdings sind Entwickler damit dazu verpflichtet ihre Applikationen demensprechend ressourcenschonend und gründlich zu planen um Abstürze oder eingefrorene Hintergrundanwendungen zu vermeiden.
